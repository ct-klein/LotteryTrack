<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="LotteryTracker.App.Views.TicketDetailPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Grid Grid.Row="0" Padding="24,24,24,16">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <Button x:Name="BackButton" Click="BackButton_Click">
                <FontIcon Glyph="&#xE72B;" FontSize="16"/>
            </Button>

            <TextBlock Grid.Column="1" Text="Ticket Details" Style="{StaticResource TitleTextBlockStyle}"
                       Margin="16,0,0,0" VerticalAlignment="Center"/>

            <Button x:Name="DeleteButton" Grid.Column="2" Click="DeleteButton_Click">
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <FontIcon Glyph="&#xE74D;" FontSize="14"/>
                    <TextBlock Text="Delete"/>
                </StackPanel>
            </Button>
        </Grid>

        <!-- Loading Indicator -->
        <ProgressRing x:Name="LoadingRing" Grid.Row="1"
                      HorizontalAlignment="Center" VerticalAlignment="Center"/>

        <!-- Error Message -->
        <InfoBar x:Name="ErrorBar" Grid.Row="1"
                 Severity="Error" Title="Error"
                 IsOpen="False"
                 Margin="24" VerticalAlignment="Top"/>

        <!-- Content -->
        <ScrollViewer x:Name="ContentArea" Grid.Row="1" Padding="24,8,24,24">
            <StackPanel Spacing="24" MaxWidth="800">

                <!-- Status Card -->
                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1"
                        CornerRadius="8" Padding="24">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Spacing="8">
                            <TextBlock Text="Current Status" Style="{StaticResource CaptionTextBlockStyle}"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                            <StackPanel Orientation="Horizontal" Spacing="12">
                                <Border x:Name="StatusBadge" CornerRadius="4" Padding="12,6">
                                    <TextBlock x:Name="StatusText" Foreground="White" FontWeight="SemiBold"/>
                                </Border>
                                <TextBlock x:Name="PrizeDisplay"
                                           Style="{StaticResource SubtitleTextBlockStyle}"
                                           Foreground="Green" VerticalAlignment="Center"/>
                            </StackPanel>
                        </StackPanel>

                        <!-- Action Buttons -->
                        <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="8">
                            <Button x:Name="MarkLoserButton" Content="Mark Loser" Click="MarkLoserButton_Click"/>
                            <Button x:Name="MarkWinnerButton" Content="Mark Winner" Style="{StaticResource AccentButtonStyle}"
                                    Click="MarkWinnerButton_Click"/>
                            <Button x:Name="ClaimButton" Content="Mark Claimed" Click="ClaimButton_Click"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Prize Amount Input (for winners) -->
                <Border x:Name="PrizeInputSection" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1"
                        CornerRadius="8" Padding="24">
                    <StackPanel Spacing="8">
                        <TextBlock Text="Prize Amount" Style="{StaticResource BodyStrongTextBlockStyle}"/>
                        <NumberBox x:Name="PrizeAmountInput" Header="Enter prize amount won"
                                   SpinButtonPlacementMode="Compact" Minimum="0"
                                   PlaceholderText="0.00" ValueChanged="PrizeAmountInput_ValueChanged"/>
                        <TextBlock Text="Enter the prize amount before marking as winner"
                                   Style="{StaticResource CaptionTextBlockStyle}"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    </StackPanel>
                </Border>

                <!-- Ticket Information -->
                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1"
                        CornerRadius="8" Padding="24">
                    <StackPanel Spacing="16">
                        <TextBlock Text="Ticket Information" Style="{StaticResource SubtitleTextBlockStyle}"/>

                        <!-- Ticket Type Icon and Name -->
                        <Grid ColumnSpacing="16">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <Border Width="64" Height="64" CornerRadius="8"
                                    Background="{ThemeResource AccentFillColorDefaultBrush}">
                                <FontIcon x:Name="TicketTypeIcon" FontSize="28" Foreground="White"/>
                            </Border>

                            <StackPanel Grid.Column="1" VerticalAlignment="Center" Spacing="4">
                                <TextBlock x:Name="TicketNameDisplay" Style="{StaticResource BodyStrongTextBlockStyle}"
                                           FontSize="18"/>
                                <TextBlock x:Name="TicketTypeDisplay" Style="{StaticResource CaptionTextBlockStyle}"
                                           Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                            </StackPanel>
                        </Grid>

                        <Rectangle Height="1" Fill="{ThemeResource DividerStrokeColorDefaultBrush}"/>

                        <!-- Common Info Grid -->
                        <Grid RowSpacing="16" ColumnSpacing="48">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- Purchase Date -->
                            <StackPanel Spacing="4">
                                <TextBlock Text="Purchase Date" Style="{StaticResource CaptionTextBlockStyle}"
                                           Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                <TextBlock x:Name="PurchaseDateDisplay" Style="{StaticResource BodyTextBlockStyle}"/>
                            </StackPanel>

                            <!-- Price -->
                            <StackPanel Grid.Column="1" Spacing="4">
                                <TextBlock Text="Price Paid" Style="{StaticResource CaptionTextBlockStyle}"
                                           Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                <TextBlock x:Name="PriceDisplay" Style="{StaticResource BodyTextBlockStyle}"/>
                            </StackPanel>

                            <!-- Serial Number -->
                            <StackPanel Grid.Row="1" Spacing="4">
                                <TextBlock Text="Serial Number" Style="{StaticResource CaptionTextBlockStyle}"
                                           Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                <TextBlock x:Name="SerialNumberDisplay" Style="{StaticResource BodyTextBlockStyle}"/>
                            </StackPanel>

                            <!-- Store -->
                            <StackPanel Grid.Row="1" Grid.Column="1" Spacing="4">
                                <TextBlock Text="Store" Style="{StaticResource CaptionTextBlockStyle}"
                                           Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                <TextBlock x:Name="StoreDisplay" Style="{StaticResource BodyTextBlockStyle}"/>
                            </StackPanel>

                            <!-- Store Location -->
                            <StackPanel Grid.Row="2" Grid.ColumnSpan="2" Spacing="4">
                                <TextBlock Text="Store Location" Style="{StaticResource CaptionTextBlockStyle}"
                                           Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                <TextBlock x:Name="StoreLocationDisplay" Style="{StaticResource BodyTextBlockStyle}"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Scratch-Off Specific Info -->
                <Border x:Name="ScratchOffInfoSection" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1"
                        CornerRadius="8" Padding="24" Visibility="Collapsed">
                    <StackPanel Spacing="16">
                        <TextBlock Text="Scratch-Off Details" Style="{StaticResource SubtitleTextBlockStyle}"/>

                        <Grid RowSpacing="16" ColumnSpacing="48">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- Game Number -->
                            <StackPanel Spacing="4">
                                <TextBlock Text="Game Number" Style="{StaticResource CaptionTextBlockStyle}"
                                           Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                <TextBlock x:Name="GameNumberDisplay" Style="{StaticResource BodyTextBlockStyle}"/>
                            </StackPanel>

                            <!-- Ticket Number -->
                            <StackPanel Grid.Column="1" Spacing="4">
                                <TextBlock Text="Ticket Number" Style="{StaticResource CaptionTextBlockStyle}"
                                           Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                <TextBlock x:Name="TicketNumberDisplay" Style="{StaticResource BodyTextBlockStyle}"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Draw Game Specific Info -->
                <Border x:Name="DrawGameInfoSection" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1"
                        CornerRadius="8" Padding="24" Visibility="Collapsed">
                    <StackPanel Spacing="16">
                        <TextBlock Text="Draw Game Details" Style="{StaticResource SubtitleTextBlockStyle}"/>

                        <Grid RowSpacing="16" ColumnSpacing="48">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- Draw Date -->
                            <StackPanel Spacing="4">
                                <TextBlock Text="Draw Date" Style="{StaticResource CaptionTextBlockStyle}"
                                           Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                <TextBlock x:Name="DrawDateDisplay" Style="{StaticResource BodyTextBlockStyle}"/>
                            </StackPanel>

                            <!-- Quick Pick -->
                            <StackPanel Grid.Column="1" Spacing="4">
                                <TextBlock Text="Selection Type" Style="{StaticResource CaptionTextBlockStyle}"
                                           Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                <TextBlock x:Name="QuickPickDisplay" Style="{StaticResource BodyTextBlockStyle}"/>
                            </StackPanel>

                            <!-- Numbers Selected -->
                            <StackPanel Grid.Row="1" Spacing="4">
                                <TextBlock Text="Numbers Selected" Style="{StaticResource CaptionTextBlockStyle}"
                                           Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                <TextBlock x:Name="NumbersSelectedDisplay" Style="{StaticResource BodyTextBlockStyle}"/>
                            </StackPanel>

                            <!-- Bonus Numbers -->
                            <StackPanel Grid.Row="1" Grid.Column="1" Spacing="4">
                                <TextBlock Text="Bonus Numbers" Style="{StaticResource CaptionTextBlockStyle}"
                                           Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                <TextBlock x:Name="BonusNumbersDisplay" Style="{StaticResource BodyTextBlockStyle}"/>
                            </StackPanel>

                            <!-- Number of Draws -->
                            <StackPanel Grid.Row="2" Spacing="4">
                                <TextBlock Text="Number of Draws" Style="{StaticResource CaptionTextBlockStyle}"
                                           Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                <TextBlock x:Name="NumberOfDrawsDisplay" Style="{StaticResource BodyTextBlockStyle}"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Notes Section -->
                <Border x:Name="NotesSection" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1"
                        CornerRadius="8" Padding="24" Visibility="Collapsed">
                    <StackPanel Spacing="8">
                        <TextBlock Text="Notes" Style="{StaticResource SubtitleTextBlockStyle}"/>
                        <TextBlock x:Name="NotesDisplay" TextWrapping="Wrap" Style="{StaticResource BodyTextBlockStyle}"/>
                    </StackPanel>
                </Border>

            </StackPanel>
        </ScrollViewer>
    </Grid>
</Page>
